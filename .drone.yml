kind: pipeline
type: docker
name: staging-automated

trigger:
  branch:
    - staging
  event:
    - push

steps:
  - name: simulate-staging-deploy
    image: alpine
    commands:
      - echo "üöÄ D√©ploiement AUTOMATIQUE sur staging"
      - echo "Simulation: construction de l'application..."
      - echo "Simulation: d√©ploiement sur serveur staging..."
      - echo "‚úÖ Staging d√©ploy√© avec succ√®s"

---
kind: pipeline
type: docker
name: production-manual

trigger:
  branch:
    - main
  event:
    - push

steps:
  - name: build-production
    image: alpine
    commands:
      - echo "üèó Construction pour production"
      - echo "Simulation: npm install"
      - echo "Simulation: npm run build"

  - name: deploy-production
    image: alpine
    commands:
      - echo "üõë ATTENTION: Ceci d√©ploierait en PRODUCTION"
      - echo "Simulation: d√©ploiement sur serveurs production..."
      - echo "‚úÖ Production d√©ploy√©e"
    when:
      status:
        - success
      action:
        - promote
